<app-menu></app-menu>

<div class="form-container">
  <form [formGroup]="candidatureForm" (ngSubmit)="onSubmit()" class="candidature-form">
    <!-- Sélection de l'offre -->
    <div class="form-group">
      <label for="offre">Offre d'emploi</label>
      <select id="offre" formControlName="offre" class="form-control">
        <option value="">Sélectionnez une offre</option>
        <option *ngFor="let offre of offres" [value]="offre.id">{{ offre.nom }}</option>
      </select>
      <div *ngIf="candidatureForm.get('offre')?.invalid && candidatureForm.get('offre')?.touched" class="text-danger">
        L'offre est requise.
      </div>
    </div>

    <!-- Sélection du candidat -->
    <div class="form-group">
      <label for="candidat">Candidat</label>
      <select id="candidat" formControlName="candidat" class="form-control">
        <option value="">Sélectionnez un candidat</option>
        <option *ngFor="let candidat of candidats" [value]="candidat.id">
          {{ candidat.utilisateur.nom }} {{ candidat.utilisateur.prenoms }}
        </option>
      </select>
      <div *ngIf="candidatureForm.get('candidat')?.invalid && candidatureForm.get('candidat')?.touched" class="text-danger">
        Le candidat est requis.
      </div>
    </div>

    <!-- Lettre de motivation -->
    <div class="form-group">
      <label for="lettreMotivation">Lettre de Motivation</label>
      <textarea id="lettreMotivation" formControlName="lettreMotivation" class="form-control" rows="5"></textarea>
      <div *ngIf="candidatureForm.get('lettreMotivation')?.invalid && candidatureForm.get('lettreMotivation')?.touched" class="text-danger">
        La lettre de motivation est requise.
      </div>
    </div>

    <!-- Date de candidature -->
    <div class="form-group">
      <label for="dateCandidature">Date de Candidature</label>
      <input id="dateCandidature" type="date" formControlName="dateCandidature" class="form-control" />
      <div *ngIf="candidatureForm.get('dateCandidature')?.invalid && candidatureForm.get('dateCandidature')?.touched" class="text-danger">
        La date de candidature est requise.
      </div>
    </div>

    <!-- Statut -->
    <div class="form-group">
      <label for="statut">Statut</label>
      <select id="statut" formControlName="statut" class="form-control">
        <option value="">Sélectionnez un statut</option>
        <option value="En cours">En cours</option>
        <option value="Acceptée">Acceptée</option>
        <option value="Refusée">Refusée</option>
      </select>
      <div *ngIf="candidatureForm.get('statut')?.invalid && candidatureForm.get('statut')?.touched" class="text-danger">
        Le statut est requis.
      </div>
    </div>

    <!-- Boutons -->
    <div class="form-actions">
      <button type="submit" class="btn btn-success" [disabled]="candidatureForm.invalid">
        Créer la Candidature
      </button>
      <button type="button" class="btn btn-secondary" (click)="onCancel()">Annuler</button>
    </div>
  </form>
</div>
